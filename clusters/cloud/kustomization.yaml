apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../apps/data/cnpg

# Uncomment and customize the patches below for cloud environments
# patches:
#   # Example: Use cloud storage class (e.g., AWS gp3, GCP pd-ssd, Azure managed-premium)
#   - target:
#       kind: Cluster
#       name: platform-postgres
#       namespace: data-system
#     patch: |-
#       - op: replace
#         path: /spec/storage/storageClass
#         value: gp3  # or pd-ssd, managed-premium, etc.
#       - op: add
#         path: /spec/resources
#         value:
#           requests:
#             cpu: "1"
#             memory: "2Gi"
#           limits:
#             cpu: "4"
#             memory: "8Gi"
#   
#   # Example: Update backup PVC storage class and size
#   - target:
#       kind: PersistentVolumeClaim
#       name: platform-postgres-backups
#       namespace: data-system
#     patch: |-
#       - op: replace
#         path: /spec/storageClassName
#         value: gp3
#       - op: replace
#         path: /spec/resources/requests/storage
#         value: 100Gi
