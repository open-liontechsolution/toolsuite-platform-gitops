# Codecentric Keycloakx Configuration
# Base values for all environments

keycloakx:
  nameOverride: ""
  fullnameOverride: ""

  # Number of replicas
  replicas: 1

  # Image configuration (uses official Keycloak image)
  image:
    repository: quay.io/keycloak/keycloak
    tag: "26.5.1"
    pullPolicy: IfNotPresent

  # Inject environment variables from secret
  # The secret contains all Keycloak configuration including admin and database credentials
  extraEnvFrom: ""
  # Example:
  # extraEnvFrom: |
  #   - secretRef:
  #       name: keycloak-credentials

  # Service configuration
  service:
    type: ClusterIP
    httpPort: 80
    httpsPort: 8443

  # Ingress configuration
  ingress:
    enabled: false

  # Resource limits and requests
  resources:
    requests:
      cpu: "250m"
      memory: "512Mi"
    limits:
      cpu: "1"
      memory: "2Gi"

  # Pod affinity rules
  affinity: |
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                {{- include "keycloak.selectorLabels" . | nindent 12 }}
            topologyKey: kubernetes.io/hostname

  # Additional pod labels
  podLabels: {}

  # HTTP configuration
  http:
    relativePath: "/"

# SealedSecret configuration
# When enabled, creates a consolidated SealedSecret with all Keycloak credentials
sealedSecret:
  enabled: false
  name: keycloak-credentials
  encryptedData:
    # Admin credentials
    KEYCLOAK_ADMIN: ""
    KEYCLOAK_ADMIN_PASSWORD: ""
    # Database configuration
    KC_DB: ""
    KC_DB_USERNAME: ""
    KC_DB_PASSWORD: ""
    KC_DB_URL_HOST: ""
    KC_DB_URL_PORT: ""
    KC_DB_URL_DATABASE: ""

# NetworkPolicy configuration
networkPolicy:
  enabled: false
  # Database namespace for cross-namespace connectivity
  databaseNamespace: ""
