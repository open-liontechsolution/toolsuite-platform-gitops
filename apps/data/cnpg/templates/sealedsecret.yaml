{{- if .Values.sealedSecret.enabled }}
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: {{ .Values.sealedSecret.name }}
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/name: {{ include "cluster.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/managed-by: {{ .Release.Service }}
spec:
  encryptedData:
    username: {{ .Values.sealedSecret.encryptedData.username | quote }}
    password: {{ .Values.sealedSecret.encryptedData.password | quote }}
  template:
    metadata:
      name: {{ .Values.sealedSecret.name }}
      namespace: {{ .Release.Namespace }}
      labels:
        app.kubernetes.io/name: {{ include "cluster.name" . }}
        app.kubernetes.io/instance: {{ .Release.Name }}
    type: Opaque
{{- end }}
