cluster:
  mode: standalone
  type: postgresql

  nameOverride: ""
  fullnameOverride: ""

  cluster:
    instances: 3
    imageName: ghcr.io/cloudnative-pg/postgresql:16.4

    storage:
      size: 20Gi
      storageClass: ""

    walStorage:
      size: 1Gi
      storageClass: ""

    resources:
      requests:
        cpu: "1000m"
        memory: "2Gi"
      limits:
        cpu: "4000m"
        memory: "8Gi"

    primaryUpdateStrategy: unsupervised

    affinity:
      topologyKey: kubernetes.io/hostname

    monitoring:
      enabled: false
      podMonitor:
        enabled: true
      prometheusRule:
        enabled: true

    initdb:
      database: platform
      owner: platform
      secret:
        name: platform-postgres-app

  backups:
    enabled: false
    retentionPolicy: "30d"
    scheduledBackups: []



# SealedSecret configuration
# This creates a SealedSecret that will be unsealed by the sealed-secrets controller
# The encrypted values must be obtained using kubeseal
sealedSecret:
  enabled: false  # Set to true in environment-specific values
  name: platform-postgres-app
  encryptedData:
    # These values must be encrypted using kubeseal
    # Example: echo -n "platform" | kubeseal --raw --from-file=/dev/stdin --namespace data-dev --name platform-postgres-app
    username: ""  # Encrypted username (set in environment values)
    password: ""  # Encrypted password (set in environment values)
